{"ast":null,"code":"import { fileToBase64 } from './utils';\n\n// Hardcoded config\nconst config = {\n  API_ENDPOINT: \"https://ke3a91dqwe.execute-api.ap-south-1.amazonaws.com/prod/optimize\",\n  MAX_FILE_SIZE: 10 * 1024 * 1024,\n  SUPPORTED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif', 'image/bmp']\n};\nexport const optimizeImage = async (file, options) => {\n  try {\n    const base64Image = await fileToBase64(file);\n    const requestBody = {\n      imageUrl: base64Image,\n      width: parseInt(options.width) || 800,\n      format: options.format || 'webp',\n      quality: parseInt(options.quality) || 85,\n      optimizeLevel: options.optimizationLevel || 'balanced'\n    };\n\n    // Add optional parameters\n    if (options.sharpness) requestBody.sharpness = parseFloat(options.sharpness);\n    if (options.contrast) requestBody.contrast = parseFloat(options.contrast);\n    if (options.brightness) requestBody.brightness = parseFloat(options.brightness);\n    if (options.stripMetadata !== undefined) requestBody.stripMetadata = options.stripMetadata;\n    if (options.progressive !== undefined) requestBody.progressive = options.progressive;\n    console.log('API Request:', requestBody);\n    const response = await fetch(config.API_ENDPOINT, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(requestBody)\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const data = await response.json();\n    if (!data.success) {\n      throw new Error(data.error || 'Optimization failed');\n    }\n    return data;\n  } catch (error) {\n    console.error('API Error:', error);\n    throw new Error(`Optimization failed: ${error.message}`);\n  }\n};\nexport { config };","map":{"version":3,"names":["fileToBase64","config","API_ENDPOINT","MAX_FILE_SIZE","SUPPORTED_TYPES","optimizeImage","file","options","base64Image","requestBody","imageUrl","width","parseInt","format","quality","optimizeLevel","optimizationLevel","sharpness","parseFloat","contrast","brightness","stripMetadata","undefined","progressive","console","log","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","success","error","message"],"sources":["C:/Users/malla/Downloads/image-optimization-app/src/services/api.js"],"sourcesContent":["import { fileToBase64 } from './utils';\r\n\r\n// Hardcoded config\r\nconst config = {\r\n    API_ENDPOINT: \"https://ke3a91dqwe.execute-api.ap-south-1.amazonaws.com/prod/optimize\",\r\n    MAX_FILE_SIZE: 10 * 1024 * 1024,\r\n    SUPPORTED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif', 'image/bmp']\r\n};\r\n\r\nexport const optimizeImage = async (file, options) => {\r\n    try {\r\n        const base64Image = await fileToBase64(file);\r\n        \r\n        const requestBody = {\r\n            imageUrl: base64Image,\r\n            width: parseInt(options.width) || 800,\r\n            format: options.format || 'webp',\r\n            quality: parseInt(options.quality) || 85,\r\n            optimizeLevel: options.optimizationLevel || 'balanced'\r\n        };\r\n        \r\n        // Add optional parameters\r\n        if (options.sharpness) requestBody.sharpness = parseFloat(options.sharpness);\r\n        if (options.contrast) requestBody.contrast = parseFloat(options.contrast);\r\n        if (options.brightness) requestBody.brightness = parseFloat(options.brightness);\r\n        if (options.stripMetadata !== undefined) requestBody.stripMetadata = options.stripMetadata;\r\n        if (options.progressive !== undefined) requestBody.progressive = options.progressive;\r\n        \r\n        console.log('API Request:', requestBody);\r\n        \r\n        const response = await fetch(config.API_ENDPOINT, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(requestBody)\r\n        });\r\n        \r\n        if (!response.ok) {\r\n            throw new Error(`HTTP ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        \r\n        if (!data.success) {\r\n            throw new Error(data.error || 'Optimization failed');\r\n        }\r\n        \r\n        return data;\r\n        \r\n    } catch (error) {\r\n        console.error('API Error:', error);\r\n        throw new Error(`Optimization failed: ${error.message}`);\r\n    }\r\n};\r\n\r\nexport { config };"],"mappings":"AAAA,SAASA,YAAY,QAAQ,SAAS;;AAEtC;AACA,MAAMC,MAAM,GAAG;EACXC,YAAY,EAAE,uEAAuE;EACrFC,aAAa,EAAE,EAAE,GAAG,IAAI,GAAG,IAAI;EAC/BC,eAAe,EAAE,CAAC,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,YAAY,EAAE,WAAW,EAAE,WAAW;AACpG,CAAC;AAED,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAOC,IAAI,EAAEC,OAAO,KAAK;EAClD,IAAI;IACA,MAAMC,WAAW,GAAG,MAAMR,YAAY,CAACM,IAAI,CAAC;IAE5C,MAAMG,WAAW,GAAG;MAChBC,QAAQ,EAAEF,WAAW;MACrBG,KAAK,EAAEC,QAAQ,CAACL,OAAO,CAACI,KAAK,CAAC,IAAI,GAAG;MACrCE,MAAM,EAAEN,OAAO,CAACM,MAAM,IAAI,MAAM;MAChCC,OAAO,EAAEF,QAAQ,CAACL,OAAO,CAACO,OAAO,CAAC,IAAI,EAAE;MACxCC,aAAa,EAAER,OAAO,CAACS,iBAAiB,IAAI;IAChD,CAAC;;IAED;IACA,IAAIT,OAAO,CAACU,SAAS,EAAER,WAAW,CAACQ,SAAS,GAAGC,UAAU,CAACX,OAAO,CAACU,SAAS,CAAC;IAC5E,IAAIV,OAAO,CAACY,QAAQ,EAAEV,WAAW,CAACU,QAAQ,GAAGD,UAAU,CAACX,OAAO,CAACY,QAAQ,CAAC;IACzE,IAAIZ,OAAO,CAACa,UAAU,EAAEX,WAAW,CAACW,UAAU,GAAGF,UAAU,CAACX,OAAO,CAACa,UAAU,CAAC;IAC/E,IAAIb,OAAO,CAACc,aAAa,KAAKC,SAAS,EAAEb,WAAW,CAACY,aAAa,GAAGd,OAAO,CAACc,aAAa;IAC1F,IAAId,OAAO,CAACgB,WAAW,KAAKD,SAAS,EAAEb,WAAW,CAACc,WAAW,GAAGhB,OAAO,CAACgB,WAAW;IAEpFC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEhB,WAAW,CAAC;IAExC,MAAMiB,QAAQ,GAAG,MAAMC,KAAK,CAAC1B,MAAM,CAACC,YAAY,EAAE;MAC9C0B,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACvB,WAAW;IACpC,CAAC,CAAC;IAEF,IAAI,CAACiB,QAAQ,CAACO,EAAE,EAAE;MACd,MAAM,IAAIC,KAAK,CAAC,QAAQR,QAAQ,CAACS,MAAM,EAAE,CAAC;IAC9C;IAEA,MAAMC,IAAI,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;IAElC,IAAI,CAACD,IAAI,CAACE,OAAO,EAAE;MACf,MAAM,IAAIJ,KAAK,CAACE,IAAI,CAACG,KAAK,IAAI,qBAAqB,CAAC;IACxD;IAEA,OAAOH,IAAI;EAEf,CAAC,CAAC,OAAOG,KAAK,EAAE;IACZf,OAAO,CAACe,KAAK,CAAC,YAAY,EAAEA,KAAK,CAAC;IAClC,MAAM,IAAIL,KAAK,CAAC,wBAAwBK,KAAK,CAACC,OAAO,EAAE,CAAC;EAC5D;AACJ,CAAC;AAED,SAASvC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}