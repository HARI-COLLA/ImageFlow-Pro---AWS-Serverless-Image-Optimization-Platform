{"ast":null,"code":"import config from './config';\nexport const fileToBase64 = file => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n};\nexport const optimizeImage = async (file, options) => {\n  try {\n    const base64Image = await fileToBase64(file);\n    const requestBody = {\n      imageUrl: base64Image,\n      width: parseInt(options.width),\n      format: options.format,\n      quality: parseInt(options.quality),\n      optimizeLevel: options.optimizationLevel,\n      sharpness: parseFloat(options.sharpness || 1.0),\n      contrast: parseFloat(options.contrast || 1.0),\n      brightness: parseFloat(options.brightness || 1.0),\n      stripMetadata: options.stripMetadata !== false,\n      progressive: options.progressive !== false\n    };\n    console.log('Sending to Lambda:', requestBody);\n    const response = await fetch(config.API_ENDPOINT, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(requestBody)\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || `HTTP ${response.status}`);\n    }\n    const data = await response.json();\n    if (!data.success) {\n      throw new Error(data.error || 'Optimization failed');\n    }\n    return data;\n  } catch (error) {\n    console.error('API Error:', error);\n    throw new Error(`Optimization failed: ${error.message}`);\n  }\n};\nexport const getOptimizationStats = (originalSize, optimizedSize) => {\n  const savings = ((originalSize - optimizedSize) / originalSize * 100).toFixed(1);\n  const savingsKB = (originalSize - optimizedSize) / 1024;\n  return {\n    savings,\n    savingsKB\n  };\n};","map":{"version":3,"names":["config","fileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","optimizeImage","options","base64Image","requestBody","imageUrl","width","parseInt","format","quality","optimizeLevel","optimizationLevel","sharpness","parseFloat","contrast","brightness","stripMetadata","progressive","console","log","response","fetch","API_ENDPOINT","method","headers","body","JSON","stringify","ok","errorData","json","catch","Error","status","data","success","message","getOptimizationStats","originalSize","optimizedSize","savings","toFixed","savingsKB"],"sources":["C:/Users/malla/Downloads/image-optimization-app/src/services/api.js"],"sourcesContent":["import config from './config'\r\n\r\nexport const fileToBase64 = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n};\r\n\r\nexport const optimizeImage = async (file, options) => {\r\n  try {\r\n    const base64Image = await fileToBase64(file);\r\n    \r\n    const requestBody = {\r\n      imageUrl: base64Image,\r\n      width: parseInt(options.width),\r\n      format: options.format,\r\n      quality: parseInt(options.quality),\r\n      optimizeLevel: options.optimizationLevel,\r\n      sharpness: parseFloat(options.sharpness || 1.0),\r\n      contrast: parseFloat(options.contrast || 1.0),\r\n      brightness: parseFloat(options.brightness || 1.0),\r\n      stripMetadata: options.stripMetadata !== false,\r\n      progressive: options.progressive !== false\r\n    };\r\n    \r\n    console.log('Sending to Lambda:', requestBody);\r\n    \r\n    const response = await fetch(config.API_ENDPOINT, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(requestBody)\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({}));\r\n      throw new Error(errorData.error || `HTTP ${response.status}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!data.success) {\r\n      throw new Error(data.error || 'Optimization failed');\r\n    }\r\n    \r\n    return data;\r\n    \r\n  } catch (error) {\r\n    console.error('API Error:', error);\r\n    throw new Error(`Optimization failed: ${error.message}`);\r\n  }\r\n};\r\n\r\nexport const getOptimizationStats = (originalSize, optimizedSize) => {\r\n  const savings = ((originalSize - optimizedSize) / originalSize * 100).toFixed(1);\r\n  const savingsKB = (originalSize - optimizedSize) / 1024;\r\n  return { savings, savingsKB };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}