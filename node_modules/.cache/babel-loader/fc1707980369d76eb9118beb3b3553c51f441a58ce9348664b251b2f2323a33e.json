{"ast":null,"code":"import { fileToBase64 } from './utils';\n\n// Hardcoded config\nconst config = {\n  API_ENDPOINT: \"https://ke3a91dqwe.execute-api.ap-south-1.amazonaws.com/prod/optimize\",\n  MAX_FILE_SIZE: 10 * 1024 * 1024,\n  SUPPORTED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif', 'image/bmp']\n};\nexport const optimizeImage = async (file, options) => {\n  try {\n    console.log(\"üì§ Converting file to base64...\", file.name, file.size);\n    const base64Image = await fileToBase64(file);\n    console.log(\"‚úÖ Base64 length:\", base64Image.length);\n    const requestBody = {\n      imageUrl: base64Image,\n      width: parseInt(options.width) || 800,\n      format: options.format || 'webp',\n      quality: parseInt(options.quality) || 85,\n      optimizeLevel: options.optimizationLevel || 'balanced'\n    };\n\n    // Add optional parameters\n    if (options.sharpness) requestBody.sharpness = parseFloat(options.sharpness);\n    if (options.contrast) requestBody.contrast = parseFloat(options.contrast);\n    if (options.brightness) requestBody.brightness = parseFloat(options.brightness);\n    if (options.stripMetadata !== undefined) requestBody.stripMetadata = options.stripMetadata;\n    if (options.progressive !== undefined) requestBody.progressive = options.progressive;\n    console.log('üöÄ Sending to API:', {\n      endpoint: config.API_ENDPOINT,\n      bodySize: JSON.stringify(requestBody).length,\n      width: requestBody.width,\n      format: requestBody.format\n    });\n    const response = await fetch(config.API_ENDPOINT, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(requestBody)\n    });\n    console.log(\"üì• API Response status:\", response.status, response.statusText);\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(\"‚ùå API Error Response:\", errorText);\n      throw new Error(`HTTP ${response.status}: ${errorText.substring(0, 100)}`);\n    }\n    const data = await response.json();\n    console.log(\"‚úÖ API Response parsed\");\n    console.log(\"üñºÔ∏è Has optimizedImage?\", !!data.optimizedImage);\n    console.log(\"üìä Data keys:\", Object.keys(data));\n    if (!data.success) {\n      console.error(\"‚ùå API returned error:\", data.error);\n      throw new Error(data.error || 'Optimization failed');\n    }\n\n    // Validate response has image\n    if (!data.optimizedImage) {\n      console.error(\"‚ùå No optimizedImage in response:\", data);\n      throw new Error('Server did not return optimized image');\n    }\n    console.log(\"üéâ Success! Image received\");\n    return data;\n  } catch (error) {\n    console.error('üí• API Call failed:', error);\n    throw new Error(`Optimization failed: ${error.message}`);\n  }\n};\nexport { config };","map":{"version":3,"names":["fileToBase64","config","API_ENDPOINT","MAX_FILE_SIZE","SUPPORTED_TYPES","optimizeImage","file","options","console","log","name","size","base64Image","length","requestBody","imageUrl","width","parseInt","format","quality","optimizeLevel","optimizationLevel","sharpness","parseFloat","contrast","brightness","stripMetadata","undefined","progressive","endpoint","bodySize","JSON","stringify","response","fetch","method","headers","body","status","statusText","ok","errorText","text","error","Error","substring","data","json","optimizedImage","Object","keys","success","message"],"sources":["C:/Users/malla/Downloads/image-optimization-app/src/services/api.js"],"sourcesContent":["import { fileToBase64 } from './utils';\r\n\r\n// Hardcoded config\r\nconst config = {\r\n    API_ENDPOINT: \"https://ke3a91dqwe.execute-api.ap-south-1.amazonaws.com/prod/optimize\",\r\n    MAX_FILE_SIZE: 10 * 1024 * 1024,\r\n    SUPPORTED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif', 'image/bmp']\r\n};\r\n\r\nexport const optimizeImage = async (file, options) => {\r\n    try {\r\n        console.log(\"üì§ Converting file to base64...\", file.name, file.size);\r\n        const base64Image = await fileToBase64(file);\r\n        console.log(\"‚úÖ Base64 length:\", base64Image.length);\r\n        \r\n        const requestBody = {\r\n            imageUrl: base64Image,\r\n            width: parseInt(options.width) || 800,\r\n            format: options.format || 'webp',\r\n            quality: parseInt(options.quality) || 85,\r\n            optimizeLevel: options.optimizationLevel || 'balanced'\r\n        };\r\n        \r\n        // Add optional parameters\r\n        if (options.sharpness) requestBody.sharpness = parseFloat(options.sharpness);\r\n        if (options.contrast) requestBody.contrast = parseFloat(options.contrast);\r\n        if (options.brightness) requestBody.brightness = parseFloat(options.brightness);\r\n        if (options.stripMetadata !== undefined) requestBody.stripMetadata = options.stripMetadata;\r\n        if (options.progressive !== undefined) requestBody.progressive = options.progressive;\r\n        \r\n        console.log('üöÄ Sending to API:', { \r\n            endpoint: config.API_ENDPOINT,\r\n            bodySize: JSON.stringify(requestBody).length,\r\n            width: requestBody.width,\r\n            format: requestBody.format\r\n        });\r\n        \r\n        const response = await fetch(config.API_ENDPOINT, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(requestBody)\r\n        });\r\n        \r\n        console.log(\"üì• API Response status:\", response.status, response.statusText);\r\n        \r\n        if (!response.ok) {\r\n            const errorText = await response.text();\r\n            console.error(\"‚ùå API Error Response:\", errorText);\r\n            throw new Error(`HTTP ${response.status}: ${errorText.substring(0, 100)}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        console.log(\"‚úÖ API Response parsed\");\r\n        console.log(\"üñºÔ∏è Has optimizedImage?\", !!data.optimizedImage);\r\n        console.log(\"üìä Data keys:\", Object.keys(data));\r\n        \r\n        if (!data.success) {\r\n            console.error(\"‚ùå API returned error:\", data.error);\r\n            throw new Error(data.error || 'Optimization failed');\r\n        }\r\n        \r\n        // Validate response has image\r\n        if (!data.optimizedImage) {\r\n            console.error(\"‚ùå No optimizedImage in response:\", data);\r\n            throw new Error('Server did not return optimized image');\r\n        }\r\n        \r\n        console.log(\"üéâ Success! Image received\");\r\n        return data;\r\n        \r\n    } catch (error) {\r\n        console.error('üí• API Call failed:', error);\r\n        throw new Error(`Optimization failed: ${error.message}`);\r\n    }\r\n};\r\n\r\nexport { config };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}