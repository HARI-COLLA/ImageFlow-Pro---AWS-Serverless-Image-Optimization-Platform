{"ast":null,"code":"import config from '../config';\n\n// Convert file to base64\nexport const fileToBase64 = file => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n};\n\n// Optimize image via API Gateway\nexport const optimizeImage = async (file, options) => {\n  try {\n    // Convert file to base64\n    const base64Image = await fileToBase64(file);\n\n    // Prepare request body\n    const body = {\n      imageUrl: base64Image,\n      width: options.width || config.DEFAULT_WIDTH,\n      format: options.format || 'webp',\n      quality: options.quality || config.DEFAULT_QUALITY\n    };\n\n    // If height is specified, add it\n    if (options.height) {\n      body.height = options.height;\n    }\n    console.log('Calling API:', config.API_ENDPOINT);\n    console.log('Request options:', body);\n\n    // Call your API Gateway\n    const response = await fetch(config.API_ENDPOINT, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    });\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`API Error ${response.status}: ${errorText}`);\n    }\n    const data = await response.json();\n    if (!data.success) {\n      throw new Error(data.error || 'Optimization failed');\n    }\n    return data;\n  } catch (error) {\n    console.error('API call failed:', error);\n    throw error;\n  }\n};\n\n// Upload to S3 (optional)\nexport const uploadToS3 = async file => {\n  // This would require additional backend setup\n  // For now, we're using direct API calls\n  console.log('Upload to S3 not implemented');\n  return null;\n};","map":{"version":3,"names":["config","fileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","optimizeImage","options","base64Image","body","imageUrl","width","DEFAULT_WIDTH","format","quality","DEFAULT_QUALITY","height","console","log","API_ENDPOINT","response","fetch","method","headers","JSON","stringify","ok","errorText","text","Error","status","data","json","success","uploadToS3"],"sources":["C:/Users/malla/Downloads/image-optimization-app/src/services/api.js"],"sourcesContent":["import config from '../config';\r\n\r\n// Convert file to base64\r\nexport const fileToBase64 = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n};\r\n\r\n// Optimize image via API Gateway\r\nexport const optimizeImage = async (file, options) => {\r\n  try {\r\n    // Convert file to base64\r\n    const base64Image = await fileToBase64(file);\r\n    \r\n    // Prepare request body\r\n    const body = {\r\n      imageUrl: base64Image,\r\n      width: options.width || config.DEFAULT_WIDTH,\r\n      format: options.format || 'webp',\r\n      quality: options.quality || config.DEFAULT_QUALITY\r\n    };\r\n    \r\n    // If height is specified, add it\r\n    if (options.height) {\r\n      body.height = options.height;\r\n    }\r\n    \r\n    console.log('Calling API:', config.API_ENDPOINT);\r\n    console.log('Request options:', body);\r\n    \r\n    // Call your API Gateway\r\n    const response = await fetch(config.API_ENDPOINT, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(body)\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API Error ${response.status}: ${errorText}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!data.success) {\r\n      throw new Error(data.error || 'Optimization failed');\r\n    }\r\n    \r\n    return data;\r\n    \r\n  } catch (error) {\r\n    console.error('API call failed:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Upload to S3 (optional)\r\nexport const uploadToS3 = async (file) => {\r\n  // This would require additional backend setup\r\n  // For now, we're using direct API calls\r\n  console.log('Upload to S3 not implemented');\r\n  return null;\r\n};"],"mappings":"AAAA,OAAOA,MAAM,MAAM,WAAW;;AAE9B;AACA,OAAO,MAAMC,YAAY,GAAIC,IAAI,IAAK;EACpC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;IAC/BD,MAAM,CAACE,aAAa,CAACN,IAAI,CAAC;IAC1BI,MAAM,CAACG,MAAM,GAAG,MAAML,OAAO,CAACE,MAAM,CAACI,MAAM,CAAC;IAC5CJ,MAAM,CAACK,OAAO,GAAGC,KAAK,IAAIP,MAAM,CAACO,KAAK,CAAC;EACzC,CAAC,CAAC;AACJ,CAAC;;AAED;AACA,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAOX,IAAI,EAAEY,OAAO,KAAK;EACpD,IAAI;IACF;IACA,MAAMC,WAAW,GAAG,MAAMd,YAAY,CAACC,IAAI,CAAC;;IAE5C;IACA,MAAMc,IAAI,GAAG;MACXC,QAAQ,EAAEF,WAAW;MACrBG,KAAK,EAAEJ,OAAO,CAACI,KAAK,IAAIlB,MAAM,CAACmB,aAAa;MAC5CC,MAAM,EAAEN,OAAO,CAACM,MAAM,IAAI,MAAM;MAChCC,OAAO,EAAEP,OAAO,CAACO,OAAO,IAAIrB,MAAM,CAACsB;IACrC,CAAC;;IAED;IACA,IAAIR,OAAO,CAACS,MAAM,EAAE;MAClBP,IAAI,CAACO,MAAM,GAAGT,OAAO,CAACS,MAAM;IAC9B;IAEAC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEzB,MAAM,CAAC0B,YAAY,CAAC;IAChDF,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAET,IAAI,CAAC;;IAErC;IACA,MAAMW,QAAQ,GAAG,MAAMC,KAAK,CAAC5B,MAAM,CAAC0B,YAAY,EAAE;MAChDG,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDd,IAAI,EAAEe,IAAI,CAACC,SAAS,CAAChB,IAAI;IAC3B,CAAC,CAAC;IAEF,IAAI,CAACW,QAAQ,CAACM,EAAE,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MACvC,MAAM,IAAIC,KAAK,CAAC,aAAaT,QAAQ,CAACU,MAAM,KAAKH,SAAS,EAAE,CAAC;IAC/D;IAEA,MAAMI,IAAI,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;IAElC,IAAI,CAACD,IAAI,CAACE,OAAO,EAAE;MACjB,MAAM,IAAIJ,KAAK,CAACE,IAAI,CAAC1B,KAAK,IAAI,qBAAqB,CAAC;IACtD;IAEA,OAAO0B,IAAI;EAEb,CAAC,CAAC,OAAO1B,KAAK,EAAE;IACdY,OAAO,CAACZ,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IACxC,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAM6B,UAAU,GAAG,MAAOvC,IAAI,IAAK;EACxC;EACA;EACAsB,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;EAC3C,OAAO,IAAI;AACb,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}