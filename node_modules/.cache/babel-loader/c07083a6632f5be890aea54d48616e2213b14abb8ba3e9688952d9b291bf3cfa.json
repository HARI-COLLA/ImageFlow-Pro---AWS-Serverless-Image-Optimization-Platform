{"ast":null,"code":"import config from'./config';export const fileToBase64=file=>{return new Promise((resolve,reject)=>{const reader=new FileReader();reader.readAsDataURL(file);reader.onload=()=>resolve(reader.result);reader.onerror=error=>reject(error);});};export const optimizeImage=async(file,options)=>{try{const base64Image=await fileToBase64(file);const requestBody={imageUrl:base64Image,width:parseInt(options.width),format:options.format,quality:parseInt(options.quality),optimizeLevel:options.optimizationLevel,sharpness:parseFloat(options.sharpness||1.0),contrast:parseFloat(options.contrast||1.0),brightness:parseFloat(options.brightness||1.0),stripMetadata:options.stripMetadata!==false,progressive:options.progressive!==false};console.log('Sending to Lambda:',requestBody);const response=await fetch(config.API_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(requestBody)});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.error||\"HTTP \".concat(response.status));}const data=await response.json();if(!data.success){throw new Error(data.error||'Optimization failed');}return data;}catch(error){console.error('API Error:',error);throw new Error(\"Optimization failed: \".concat(error.message));}};export const getOptimizationStats=(originalSize,optimizedSize)=>{const savings=((originalSize-optimizedSize)/originalSize*100).toFixed(1);const savingsKB=(originalSize-optimizedSize)/1024;return{savings,savingsKB};};","map":{"version":3,"names":["config","fileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","optimizeImage","options","base64Image","requestBody","imageUrl","width","parseInt","format","quality","optimizeLevel","optimizationLevel","sharpness","parseFloat","contrast","brightness","stripMetadata","progressive","console","log","response","fetch","API_ENDPOINT","method","headers","body","JSON","stringify","ok","errorData","json","catch","Error","concat","status","data","success","message","getOptimizationStats","originalSize","optimizedSize","savings","toFixed","savingsKB"],"sources":["C:/Users/malla/Downloads/image-optimization-app/src/services/api.js"],"sourcesContent":["import config from './config';\r\n\r\nexport const fileToBase64 = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n};\r\n\r\nexport const optimizeImage = async (file, options) => {\r\n  try {\r\n    const base64Image = await fileToBase64(file);\r\n    \r\n    const requestBody = {\r\n      imageUrl: base64Image,\r\n      width: parseInt(options.width),\r\n      format: options.format,\r\n      quality: parseInt(options.quality),\r\n      optimizeLevel: options.optimizationLevel,\r\n      sharpness: parseFloat(options.sharpness || 1.0),\r\n      contrast: parseFloat(options.contrast || 1.0),\r\n      brightness: parseFloat(options.brightness || 1.0),\r\n      stripMetadata: options.stripMetadata !== false,\r\n      progressive: options.progressive !== false\r\n    };\r\n    \r\n    console.log('Sending to Lambda:', requestBody);\r\n    \r\n    const response = await fetch(config.API_ENDPOINT, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(requestBody)\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({}));\r\n      throw new Error(errorData.error || `HTTP ${response.status}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!data.success) {\r\n      throw new Error(data.error || 'Optimization failed');\r\n    }\r\n    \r\n    return data;\r\n    \r\n  } catch (error) {\r\n    console.error('API Error:', error);\r\n    throw new Error(`Optimization failed: ${error.message}`);\r\n  }\r\n};\r\n\r\nexport const getOptimizationStats = (originalSize, optimizedSize) => {\r\n  const savings = ((originalSize - optimizedSize) / originalSize * 100).toFixed(1);\r\n  const savingsKB = (originalSize - optimizedSize) / 1024;\r\n  return { savings, savingsKB };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}